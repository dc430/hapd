#: import FadeTransition kivy.uix.screenmanager.FadeTransition
UserScreenManager:
    transition: FadeTransition()
    NavScreen:
    NewUser:
    ExistingUser:
        id: euser
    HomePage:
        id: homepage
    api:
        id: api

#####################################################    NAVIGATION SCREEN     ########################################################buildoze

#####################################################    NAVIGATION SCREEN     ########################################################

<NavScreen>:
    name: 'NavScreen'
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: '2.jpg'
    FloatLayout:
        Button:
            on_release: app.root.current = 'NewUser'
            size_hint: 0.3, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.7}
            text: 'New User'
            font_size: 0.5*self.height
            background_color: (0.5,0.5,0.9,0.3)

        Button:
            on_press: root.manager.current = 'ExistingUser'
            size_hint: 0.3, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.4}
            text: 'Exisiting User?'
            font_size: 0.5*self.height
            background_color: (0.5,0.5,0.9,0.3)

########################################################   NEW USER FORM   #############################################################

<NewUser>:
    name: 'NewUser'
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: '4.jpg'
    
    FloatLayout:

        Label:
            text: 'Fill the details to join'
            size_hint: 0.3, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.9}
            font_size: 0.4*self.height

        TextInput:
            id: name_newUser
            hint_text: 'Name'
            size_hint: 0.3, 0.06
            multiline: False
            pos_hint: {'center_x': 0.5, 'center_y': 0.8}
            font_size: 0.4*self.height

        TextInput:
            id: age_newUser
            hint_text: 'Age'
            size_hint: 0.3, 0.06
            multiline: False
            pos_hint: {'center_x': 0.5, 'center_y': 0.7}
            font_size: 0.4*self.height
            
        GridLayout:
            cols: 2
            spacing: '8dp'
            size_hint: .3, None
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}
            height: self.minimum_height
            ToggleButton:
                size_hint_y: None
                on_press: app.root.ids.api.gender = 'Male'
                height: '30dp'
                text: 'Male'
                group: 'g1'
            ToggleButton:
                size_hint_y: None
                on_press: app.root.ids.api.gender = 'Female'
                height: '30dp'
                text: 'Female'
                group: 'g1'
        
        TextInput:
            id: dob_newUser
            hint_text: 'Date of Birth'
            size_hint: 0.3, 0.06
            multiline: False
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            font_size: 0.4*self.height

        TextInput:
            id: pin_newUser
            hint_text: 'PIN'
            allow_copy: False
            size_hint: 0.3, 0.06
            password: True
            multiline: False
            pos_hint: {'center_x': 0.5, 'center_y': 0.4}
            font_size: 0.4*self.height

        Button:
            text: 'Submit'
            size_hint: 0.3, 0.1  
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}  
            font_size: 0.4*self.height
            on_press: app.root.ids.api.sendDataToRealTimeDb(name_newUser.text, age_newUser.text, dob_newUser.text, pin_newUser.text)
            on_release: root.manager.current = 'HomePage'

        Button:
            pos_hint: {'center_x': 0.5, 'center_y': 0.1}
            on_press: root.manager.current = 'NavScreen'
            size_hint: 0.05, 0.04
            background_color: (1,1,1,0.5)
            Image:
                source: '1.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y


########################################################   EXISTING USER LOGIN   #############################################################

<ExistingUser>:
    name: 'ExistingUser'
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: '4.jpg'


    FloatLayout:

        Label: 
            text: 'Patient ID'
            size_hint: 0.3, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.9}
            font_size: 0.6*self.height

        TextInput:
            id: pId
            multiline: False
            hint_text: '123xx'
            size_hint: 0.3, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.8}
            font_size: 0.6*self.height

        Label: 
            text: 'Unique PIN'
            size_hint: 0.3, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}
            font_size: 0.6*self.height

        TextInput:
            id: pin
            multiline: False
            password: True
            size_hint: 0.3, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            font_size: 0.6*self.height

        Button:
            id: 'logIn'
            text: 'LOG IN'
            size_hint: 0.3, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}
            font_size: 0.6*self.height
            #on_press: root.sendId(pId.text, pin.text)
            on_release: app.root.manager.current = 'HomePage'

        Button:
            pos_hint: {'center_x': 0.5, 'center_y': 0.1}
            on_press: root.manager.current = 'NavScreen'
            size_hint: 0.1, 0.1
            Image:
                source: '1.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y


########################################################   HOMEPAGE   #############################################################


<HomePage>:
    name:'HomePage'
    Label:
        text: 'You are now on the Home page.'
    Button:
        pos_hint: {'center_x': 0.5, 'center_y': 0.1}
        on_press: root.manager.current = 'NavScreen'
        size_hint: 0.1, 0.1
        Image:
            source: '1.png'
            center_x: self.parent.center_x
            center_y: self.parent.center_y



            